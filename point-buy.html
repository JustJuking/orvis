<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="favicon.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orvis Unbound</title>
<link rel="stylesheet" href="style.css">
<style>
  .pb-intro {
    text-align: center;
    margin-bottom: 28px;
  }

  .budget-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, #2c1a0e, #4a2e10);
    border: 2px solid var(--gold);
    border-radius: 4px;
    padding: 14px 28px;
    margin-bottom: 32px;
    box-shadow: inset 0 2px 10px rgba(0,0,0,0.5), 0 2px 4px rgba(201,150,58,0.3);
    flex-wrap: wrap;
    gap: 16px;
  }

  .budget-left {
    display: flex;
    align-items: center;
    gap: 24px;
  }

  .budget-right {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .budget-item {
    text-align: center;
  }

  .budget-label {
    font-family: 'Cinzel', serif;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--gold);
    display: block;
    margin-bottom: 2px;
  }

  .budget-value {
    font-family: 'Cinzel', serif;
    font-size: 2rem;
    font-weight: 700;
    color: var(--gold-bright);
    text-shadow: 0 0 12px rgba(240,192,64,0.5);
    line-height: 1;
  }

  .budget-value.danger { color: #ff6060; text-shadow: 0 0 12px rgba(255,80,80,0.5); }
  .budget-value.perfect { color: #80e060; text-shadow: 0 0 12px rgba(120,220,80,0.5); }

  .budget-divider {
    width: 1px;
    height: 40px;
    background: rgba(201,150,58,0.3);
  }

  .budget-control-label {
    font-family: 'Cinzel', serif;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--gold);
    display: block;
    margin-bottom: 6px;
    text-align: center;
  }

  .budget-control-row {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .budget-control-value {
    font-family: 'Cinzel', serif;
    font-size: 2rem;
    font-weight: 700;
    color: var(--gold-bright);
    min-width: 40px;
    text-align: center;
    line-height: 1;
  }

  .stat-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 24px;
  }

  @media (max-width: 560px) {
    .stat-grid { grid-template-columns: repeat(2, 1fr); }
    .budget-bar { flex-direction: column; align-items: center; }
    .budget-left { flex-direction: column; }
  }

  .stat-card {
    background: linear-gradient(145deg, #fdf8e8, var(--parchment-mid));
    border: 2px solid var(--parchment-shadow);
    border-radius: 4px;
    padding: 16px 12px 14px;
    text-align: center;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.6);
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .stat-card:focus-within {
    border-color: var(--gold);
    box-shadow: 2px 2px 8px rgba(0,0,0,0.15), 0 0 10px rgba(201,150,58,0.25), inset 0 1px 0 rgba(255,255,255,0.6);
  }

  .stat-name {
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--ink-faded);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 10px;
    display: block;
  }

  .stat-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
  }

  .stat-btn {
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, #3a2210, #2c1a0e);
    border: 1px solid var(--gold-dim);
    color: var(--gold-bright);
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    font-weight: 700;
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    line-height: 1;
    padding: 0;
  }

  .stat-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #4a2e10, #3a2210);
    box-shadow: 0 0 8px rgba(201,150,58,0.3);
  }

  .stat-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .stat-value {
    font-family: 'Cinzel', serif;
    font-size: 1.9rem;
    font-weight: 900;
    color: var(--ink);
    min-width: 44px;
    text-align: center;
    line-height: 1;
  }

  .stat-modifier {
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--gold);
    display: block;
    margin-bottom: 4px;
  }

  .stat-cost {
    font-family: 'Crimson Text', serif;
    font-size: 1.1rem;
    font-style: italic;
    color: var(--ink-faded);
    display: block;
  }

  .action-row {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    margin-top: 24px;
    flex-wrap: wrap;
  }

  .stat-summary {
    margin-top: 28px;
    padding: 16px 20px;
    background: rgba(44,26,14,0.04);
    border: 1px solid rgba(139,96,16,0.2);
    border-radius: 3px;
    text-align: center;
  }

  .stat-summary h3 {
    font-family: 'Cinzel', serif;
    font-size: 0.85rem;
    letter-spacing: 0.08em;
    color: var(--ink-faded);
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .summary-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }

  .summary-stat {
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    color: var(--ink-light);
    background: rgba(255,255,255,0.4);
    border: 1px solid rgba(139,96,16,0.2);
    border-radius: 2px;
    padding: 4px 12px;
    text-align: center;
  }

  .summary-stat span {
    display: block;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--ink);
  }
</style>
</head>
<body>

<div class="dir-bar">
  <a href="index.html" class="dir-home">Orvis Unbound</a>
  <a href="world.html" class="dir-pill">About Orvis</a>
  <a href="species.html" class="dir-pill">New Species</a>
  <a href="classes.html" class="dir-pill">New Classes</a>
  <a href="talent-tree.html" class="dir-pill">Talent Trees</a>
  <a href="point-buy.html" class="dir-pill">Point Buy</a>
  <a href="house-rules.html" class="dir-pill">House Rules</a>
  <a href="https://app.syrinscape.com/d3d373e5ef4d4d80a701418f53ae5462/player/" class="dir-end">Syrinscape</a>
</div>

<div class="page-wrapper">
  <div class="parchment fade-in">
    <span class="corner-ornament co-tl">❧</span>
    <span class="corner-ornament co-tr">❧</span>
    <span class="corner-ornament co-bl">❧</span>
    <span class="corner-ornament co-br">❧</span>

    <div class="pb-intro">
      <h1 class="page-title">Calculate Your Stats</h1>
      <p class="page-subtitle">Plan your ability scores with precision.</p>
    </div>

    <div class="ornament">⸻ ✦ ⸻</div>

    <p>This calculator can be used to assign starting stat points for your character. All stats start at 8. You have <strong id="introPoints">25</strong> points to spend. Stats above 13 cost more per point — plan carefully. Talk to your DM about your stat point budget.</p>

    <!-- Budget bar -->
    <div class="budget-bar">
      <div class="budget-left">
        <div class="budget-item">
          <span class="budget-label">Points Spent</span>
          <div class="budget-value" id="spentDisplay">0</div>
        </div>
        <div class="budget-divider"></div>
        <div class="budget-item">
          <span class="budget-label">Remaining</span>
          <div class="budget-value" id="remainDisplay">25</div>
        </div>
      </div>

      <div class="budget-right">
        <div>
          <span class="budget-control-label">Point Budget</span>
          <div class="budget-control-row">
            <button class="stat-btn" onclick="adjustBudget(-1)">−</button>
            <div class="budget-control-value" id="totalDisplay">25</div>
            <button class="stat-btn" onclick="adjustBudget(1)">+</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Stat cards -->
    <div class="stat-grid" id="statGrid"></div>

    <!-- Actions -->
    <div class="action-row">
      <button class="btn btn-primary" onclick="resetStats()">✕ Reset All Stats</button>
    </div>

  </div>
</div>

<script>
  let TOTAL_POINTS = 25;
  const MIN_SCORE = 8;
  const MAX_SCORE = 15;

  const COST_TABLE = {
    8: 0, 9: 1, 10: 2, 11: 3, 12: 4, 13: 5, 14: 7, 15: 9
  };

  const STATS = [
    { id: 'str', abbr: 'STR' },
    { id: 'dex', abbr: 'DEX' },
    { id: 'con', abbr: 'CON' },
    { id: 'int', abbr: 'INT' },
    { id: 'wis', abbr: 'WIS' },
    { id: 'cha', abbr: 'CHA' },
  ];

  let values = {};
  STATS.forEach(s => values[s.id] = 8);

  function getModifier(score) {
    const mod = Math.floor((score - 10) / 2);
    return mod >= 0 ? '+' + mod : '' + mod;
  }

  function totalSpent() {
    return Object.values(values).reduce((sum, v) => sum + COST_TABLE[v], 0);
  }

  function adjustBudget(delta) {
    TOTAL_POINTS = Math.max(0, TOTAL_POINTS + delta);
    document.getElementById('totalDisplay').textContent = TOTAL_POINTS;
    document.getElementById('introPoints').textContent = TOTAL_POINTS;
    updateDisplay();
  }

  function buildGrid() {
    const grid = document.getElementById('statGrid');
    grid.innerHTML = '';
    STATS.forEach(stat => {
      const card = document.createElement('div');
      card.className = 'stat-card';
      card.id = 'card-' + stat.id;
      card.innerHTML = `
        <span class="stat-name">${stat.abbr}</span>
        <div class="stat-control">
          <button class="stat-btn" id="dec-${stat.id}" onclick="adjustStat('${stat.id}', -1)">−</button>
          <div class="stat-value" id="val-${stat.id}">${values[stat.id]}</div>
          <button class="stat-btn" id="inc-${stat.id}" onclick="adjustStat('${stat.id}', 1)">+</button>
        </div>
        <span class="stat-modifier" id="mod-${stat.id}">${getModifier(values[stat.id])}</span>
        <span class="stat-cost" id="cost-${stat.id}">Cost: ${COST_TABLE[values[stat.id]]} pts</span>
      `;
      grid.appendChild(card);
    });
    updateDisplay();
  }

  function adjustStat(id, delta) {
    const newVal = values[id] + delta;
    if (newVal < MIN_SCORE || newVal > MAX_SCORE) return;

    const newCost = COST_TABLE[newVal];
    const oldCost = COST_TABLE[values[id]];
    const remaining = TOTAL_POINTS - totalSpent();

    if (delta > 0 && (newCost - oldCost) > remaining) return;

    values[id] = newVal;
    updateDisplay();
  }

  function updateDisplay() {
    const spent = totalSpent();
    const remaining = TOTAL_POINTS - spent;

    document.getElementById('spentDisplay').textContent = spent;
    document.getElementById('remainDisplay').textContent = remaining;

    const remEl = document.getElementById('remainDisplay');
    remEl.className = 'budget-value';
    if (remaining === 0) remEl.classList.add('perfect');
    else if (remaining < 0) remEl.classList.add('danger');

    STATS.forEach(stat => {
      const v = values[stat.id];
      document.getElementById('val-' + stat.id).textContent = v;
      document.getElementById('mod-' + stat.id).textContent = getModifier(v);
      document.getElementById('cost-' + stat.id).textContent = 'Cost: ' + COST_TABLE[v] + ' pts';

      const dec = document.getElementById('dec-' + stat.id);
      const inc = document.getElementById('inc-' + stat.id);
      dec.disabled = v <= MIN_SCORE;

      const nextCost = v < MAX_SCORE ? COST_TABLE[v + 1] - COST_TABLE[v] : 99;
      inc.disabled = v >= MAX_SCORE || nextCost > remaining;
    });

  }

  function resetStats() {
    STATS.forEach(s => values[s.id] = 8);
    updateDisplay();
  }

  buildGrid();
</script>

<canvas id="runeCanvas"></canvas>
<script src="runes.js"></script>
</body>
</html>
